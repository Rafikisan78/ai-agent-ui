â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ARCHITECTURE MULTIMODALE N8N - VUE COMPLÃˆTE                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  UTILISATEUR                                      â”‚
â”‚                         Navigateur Web (Chrome/Firefox)                           â”‚
â”‚                           http://localhost:3003                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Interface graphique
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          COUCHE FRONTEND (React + Vite)                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                             App.jsx (Hub Central)                             â”‚ â”‚
â”‚ â”‚  â€¢ Ã‰tat global: response, error, isLoading, history                          â”‚ â”‚
â”‚ â”‚  â€¢ Orchestration des composants                                              â”‚ â”‚
â”‚ â”‚  â€¢ Extraction tableau N8N: responseData = result[0]                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚                               â”‚                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚    COMPOSANTS D'ENTRÃ‰E            â”‚  â”‚   COMPOSANTS D'AFFICHAGE            â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ PromptInput.jsx               â”‚ â”‚  â”‚ â”‚ MultimodalDisplay.jsx           â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Champ texte                 â”‚ â”‚  â”‚ â”‚ â€¢ Type "text" â†’ <pre>           â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Bouton "Envoyer"            â”‚ â”‚  â”‚ â”‚ â€¢ Type "image" â†’ <img>          â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ IntÃ©gration VoiceInput      â”‚ â”‚  â”‚ â”‚ â€¢ Type "video" â†’ <video>        â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ IntÃ©gration FileUpload      â”‚ â”‚  â”‚ â”‚ â€¢ Type "audio" â†’ <audio>        â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ â€¢ Bouton synthÃ¨se vocale (TTS)  â”‚ â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚ â”‚ VoiceInput.jsx                â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Bouton microphone ğŸ¤        â”‚ â”‚  â”‚ â”‚ History Sidebar                 â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Web Speech Recognition API  â”‚ â”‚  â”‚ â”‚ â€¢ Liste conversations Supabase  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ onTranscript() callback     â”‚ â”‚  â”‚ â”‚ â€¢ Click â†’ Charger conversation  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Animation pulsante          â”‚ â”‚  â”‚ â”‚ â€¢ Badge type (text/image/video) â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚                                     â”‚   â”‚
â”‚ â”‚ â”‚ FileUpload.jsx                â”‚ â”‚  â”‚                                     â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Drag & Drop zone            â”‚ â”‚  â”‚                                     â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Preview fichier + icÃ´ne     â”‚ â”‚  â”‚                                     â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Support image/audio/video   â”‚ â”‚  â”‚                                     â”‚   â”‚
â”‚ â”‚ â”‚ â€¢ Bouton "Clear"              â”‚ â”‚  â”‚                                     â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                                     â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                         COUCHE SERVICES (JavaScript)                          â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ n8n.js      â”‚        â”‚ supabase.js  â”‚         â”‚ speech.js                â”‚ â”‚ â”‚
â”‚ â”‚ â”‚             â”‚        â”‚              â”‚         â”‚                          â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ fetch()   â”‚        â”‚ â€¢ save       â”‚         â”‚ â€¢ SpeechRecognition      â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ POST      â”‚        â”‚   Conversationâ”‚         â”‚ â€¢ SpeechSynthesis        â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ payload:  â”‚        â”‚ â€¢ get        â”‚         â”‚ â€¢ speakText()            â”‚ â”‚ â”‚
â”‚ â”‚ â”‚   {message, â”‚        â”‚   History    â”‚         â”‚ â€¢ stopSpeaking()         â”‚ â”‚ â”‚
â”‚ â”‚ â”‚   timestamp}â”‚        â”‚ â€¢ delete     â”‚         â”‚ â€¢ createAudioRecorder()  â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ return    â”‚        â”‚   Conversationâ”‚         â”‚                          â”‚ â”‚ â”‚
â”‚ â”‚ â”‚   JSON      â”‚        â”‚              â”‚         â”‚                          â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ HTTP POST              â”‚ REST API (SELECT/INSERT)
           â”‚ JSON                   â”‚
           â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 LAYER BACKEND                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚         N8N WORKFLOW ENGINE             â”‚  â”‚      SUPABASE (PostgreSQL)      â”‚ â”‚
â”‚ â”‚  n8n.srv766650.hstgr.cloud              â”‚  â”‚  nivbykzatzugwslnodqi...        â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Webhook (EntrÃ©e)                    â”‚ â”‚  â”‚ â”‚ Table: conversations        â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Path: /ai-agent-fiable              â”‚ â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Method: POST                        â”‚ â”‚  â”‚ â”‚ â”‚ id (uuid, PK)           â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Input: {message, timestamp}         â”‚ â”‚  â”‚ â”‚ â”‚ user_message (text)     â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ â”‚ assistant_response      â”‚ â”‚ â”‚ â”‚
â”‚ â”‚                â”‚                         â”‚  â”‚ â”‚ â”‚   (jsonb)               â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ â”‚ response_type (text)    â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Validate & Normalize Input          â”‚ â”‚  â”‚ â”‚ â”‚ metadata (jsonb)        â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ VÃ©rifier message non vide         â”‚ â”‚  â”‚ â”‚ â”‚ created_at (timestamp)  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ Support body.message ou message   â”‚ â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ Normaliser format                 â”‚ â”‚  â”‚ â”‚                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ Retour: {isValid: true/false}     â”‚ â”‚  â”‚ â”‚ Auth: Anon Key              â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ RLS: Ã€ configurer (prod)    â”‚ â”‚ â”‚
â”‚ â”‚                â”‚                         â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚ â”‚ Is Valid? (Condition)               â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ True â†’ Continue                   â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ False â†’ Error Response            â”‚ â”‚                                      â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                      â”‚
â”‚ â”‚                â”‚                         â”‚                                      â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                      â”‚
â”‚ â”‚ â”‚ Detect Input Type (Code)            â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ Analyse message                   â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ /image â†’ "image-generation"       â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ /video â†’ "video-generation"       â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ /search â†’ "web-search"            â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ Autre â†’ "text"                    â”‚ â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ Extract prompt aprÃ¨s commande     â”‚ â”‚                                      â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                      â”‚
â”‚ â”‚                â”‚                         â”‚                                      â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                      â”‚
â”‚ â”‚ â”‚ Router (Switch - 4 sorties)         â”‚ â”‚                                      â”‚
â”‚ â”‚ â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚                                      â”‚
â”‚ â”‚   â”‚ TEXT   â”‚ IMAGE    â”‚ VIDEO    â”‚ FILE â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚ â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚ â”‚AI Agentâ”‚ â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚ â”‚(Claude)â”‚ â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚ â”‚Sonnet  â”‚ â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚ â”‚4.5     â”‚ â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚ â””â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚DALL-E      â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚Request     â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚(HTTP)      â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚POST OpenAI â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚10-20s      â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚Format      â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚DALL-E      â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â”‚Response    â”‚ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Replicate   â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Video Start â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚(HTTP)      â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚POST        â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Replicate   â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Wait 8s     â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚(Pause)     â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Replicate   â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Video Statusâ”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚(HTTP GET)  â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Format Videoâ”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â”‚Response    â”‚ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚      â”‚File    â”‚ â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚      â”‚Analysisâ”‚ â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚      â”‚(TODO)  â”‚ â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚                                      â”‚
â”‚ â”‚   â”‚        â”‚          â”‚          â”‚      â”‚                                      â”‚
â”‚ â”‚ â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â–¼â”                                     â”‚
â”‚ â”‚ â”‚      Format Response (Unification)     â”‚                                     â”‚
â”‚ â”‚ â”‚ â€¢ Standardise tous les formats         â”‚                                     â”‚
â”‚ â”‚ â”‚ â€¢ Output: {success, type, content}     â”‚                                     â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜                                     â”‚
â”‚ â”‚                   â”‚                    â”‚                                       â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                                       â”‚
â”‚ â”‚ â”‚ Send Response (Webhook sortie)   â”‚   â”‚                                       â”‚
â”‚ â”‚ â”‚ â€¢ Retourne JSON au frontend      â”‚   â”‚                                       â”‚
â”‚ â”‚ â”‚ â€¢ Format: [{success, type, ...}] â”‚   â”‚                                       â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                                       â”‚
â”‚ â”‚                                        â”‚                                       â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”                                      â”‚
â”‚ â”‚ â”‚ Error Response (Si validation Ã©choue) â”‚                                      â”‚
â”‚ â”‚ â”‚ â€¢ Code erreur + message               â”‚                                      â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ Appels HTTP (APIs Externes)
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SERVICES IA EXTERNES                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   ANTHROPIC API     â”‚  â”‚    OPENAI API       â”‚  â”‚     REPLICATE API           â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚                     â”‚  â”‚                             â”‚ â”‚
â”‚ â”‚ Claude Sonnet 4.5   â”‚  â”‚    DALL-E 3         â”‚  â”‚  Stable Video Diffusion     â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚                     â”‚  â”‚                             â”‚ â”‚
â”‚ â”‚ Endpoint:           â”‚  â”‚ Endpoint:           â”‚  â”‚ Endpoints:                  â”‚ â”‚
â”‚ â”‚ /v1/messages        â”‚  â”‚ /v1/images/         â”‚  â”‚ POST /v1/predictions        â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚   generations       â”‚  â”‚ GET  /v1/predictions/:id    â”‚ â”‚
â”‚ â”‚ Auth:               â”‚  â”‚                     â”‚  â”‚                             â”‚ â”‚
â”‚ â”‚ x-api-key           â”‚  â”‚ Auth:               â”‚  â”‚ Auth:                       â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚ Bearer token        â”‚  â”‚ Token r8_...                â”‚ â”‚
â”‚ â”‚ Input:              â”‚  â”‚                     â”‚  â”‚                             â”‚ â”‚
â”‚ â”‚ {                   â”‚  â”‚ Input:              â”‚  â”‚ Input:                      â”‚ â”‚
â”‚ â”‚   model: "claude-  â”‚  â”‚ {                   â”‚  â”‚ {                           â”‚ â”‚
â”‚ â”‚     sonnet-4-5...", â”‚  â”‚   model: "dall-e-3",â”‚  â”‚   version: "3f0457...",     â”‚ â”‚
â”‚ â”‚   messages: [...]   â”‚  â”‚   prompt: "...",    â”‚  â”‚   input: {                  â”‚ â”‚
â”‚ â”‚ }                   â”‚  â”‚   n: 1,             â”‚  â”‚     prompt: "...",          â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚   size: "1024x1024" â”‚  â”‚     num_frames: 25,         â”‚ â”‚
â”‚ â”‚ Output:             â”‚  â”‚ }                   â”‚  â”‚     fps: 7                  â”‚ â”‚
â”‚ â”‚ {                   â”‚  â”‚                     â”‚  â”‚   }                         â”‚ â”‚
â”‚ â”‚   content: [{       â”‚  â”‚ Output:             â”‚  â”‚ }                           â”‚ â”‚
â”‚ â”‚     text: "..."     â”‚  â”‚ {                   â”‚  â”‚                             â”‚ â”‚
â”‚ â”‚   }]                â”‚  â”‚   data: [{          â”‚  â”‚ Output (aprÃ¨s 8-15s):       â”‚ â”‚
â”‚ â”‚ }                   â”‚  â”‚     url: "https://",â”‚  â”‚ {                           â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚     revised_prompt  â”‚  â”‚   status: "succeeded",      â”‚ â”‚
â”‚ â”‚ CoÃ»t:               â”‚  â”‚   }]                â”‚  â”‚   output: "https://         â”‚ â”‚
â”‚ â”‚ ~$3/1M tokens       â”‚  â”‚ }                   â”‚  â”‚     replicate.delivery/..." â”‚ â”‚
â”‚ â”‚ (~$0.003/message)   â”‚  â”‚                     â”‚  â”‚ }                           â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚ CoÃ»t:               â”‚  â”‚                             â”‚ â”‚
â”‚ â”‚ Temps: 2-5s         â”‚  â”‚ ~$0.04/image        â”‚  â”‚ CoÃ»t:                       â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚                     â”‚  â”‚ ~$0.01-0.02/vidÃ©o           â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚ Temps: 10-20s       â”‚  â”‚                             â”‚ â”‚
â”‚ â”‚                     â”‚  â”‚                     â”‚  â”‚ Temps: 10-20s               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                FLUX DE DONNÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXEMPLE 1 : GÃ‰NÃ‰RATION D'IMAGE                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚ 1. User tape: "/image un dragon bleu volant"                                   â”‚
â”‚    â†“                                                                            â”‚
â”‚ 2. PromptInput.jsx â†’ handleSubmit(message)                                      â”‚
â”‚    â†“                                                                            â”‚
â”‚ 3. App.jsx â†’ triggerWorkflow("/image un dragon bleu volant")                   â”‚
â”‚    â†“                                                                            â”‚
â”‚ 4. n8n.js â†’ POST https://n8n.../ai-agent-fiable                                â”‚
â”‚    Body: {message: "/image un dragon bleu volant", timestamp: "..."}           â”‚
â”‚    â†“                                                                            â”‚
â”‚ 5. N8N Webhook reÃ§oit â†’ Validate â†’ Detect Type                                 â”‚
â”‚    Detect extrait: {inputType: "image-generation", prompt: "un dragon bleu"}   â”‚
â”‚    â†“                                                                            â”‚
â”‚ 6. Router â†’ Sortie "image" â†’ DALL-E Request                                    â”‚
â”‚    â†“                                                                            â”‚
â”‚ 7. DALL-E Request â†’ POST https://api.openai.com/v1/images/generations          â”‚
â”‚    Body: {model: "dall-e-3", prompt: "un dragon bleu volant", n: 1}            â”‚
â”‚    â†“ (GÃ©nÃ©ration 10-20 secondes)                                               â”‚
â”‚ 8. OpenAI retourne: {data: [{url: "https://oaidalleapi...", ...}]}             â”‚
â”‚    â†“                                                                            â”‚
â”‚ 9. Format DALL-E Response extrait URL                                          â”‚
â”‚    Output: {success: true, type: "image", content: {url: "...", ...}}          â”‚
â”‚    â†“                                                                            â”‚
â”‚ 10. Format Response â†’ Send Response                                            â”‚
â”‚    Retour: [{success: true, type: "image", content: {url: "..."}}]             â”‚
â”‚    â†“                                                                            â”‚
â”‚ 11. App.jsx reÃ§oit â†’ responseData = result[0]                                  â”‚
â”‚    setResponse({success: true, type: "image", content: {url: "..."}})          â”‚
â”‚    â†“                                                                            â”‚
â”‚ 12. MultimodalDisplay.jsx dÃ©tecte type === "image"                             â”‚
â”‚    Affiche: <img src={content.url} alt={content.description} />                â”‚
â”‚    â†“                                                                            â”‚
â”‚ 13. supabase.js â†’ saveConversation()                                           â”‚
â”‚    INSERT INTO conversations (user_message, assistant_response, ...)           â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXEMPLE 2 : GÃ‰NÃ‰RATION DE VIDÃ‰O                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚ 1. User tape: "/video un chat qui court dans un jardin"                        â”‚
â”‚    â†“                                                                            â”‚
â”‚ 2. PromptInput.jsx â†’ handleSubmit(message)                                      â”‚
â”‚    â†“                                                                            â”‚
â”‚ 3. App.jsx â†’ triggerWorkflow("/video un chat qui court...")                    â”‚
â”‚    â†“                                                                            â”‚
â”‚ 4. n8n.js â†’ POST https://n8n.../ai-agent-fiable                                â”‚
â”‚    Body: {message: "/video un chat qui court...", timestamp: "..."}            â”‚
â”‚    â†“                                                                            â”‚
â”‚ 5. N8N Webhook â†’ Validate â†’ Detect Type                                        â”‚
â”‚    Detect: {inputType: "video-generation", prompt: "un chat qui court..."}     â”‚
â”‚    â†“                                                                            â”‚
â”‚ 6. Router â†’ Sortie "video" â†’ Replicate Video Start                             â”‚
â”‚    â†“                                                                            â”‚
â”‚ 7. Replicate Video Start â†’ POST https://api.replicate.com/v1/predictions       â”‚
â”‚    Body: {version: "3f0457...", input: {prompt: "...", num_frames: 25}}        â”‚
â”‚    â†“                                                                            â”‚
â”‚ 8. Replicate retourne: {id: "abc123", urls: {get: "..."}, status: "starting"}  â”‚
â”‚    â†“                                                                            â”‚
â”‚ 9. Wait 8 Seconds â†’ Pause de 8 secondes                                        â”‚
â”‚    â†“                                                                            â”‚
â”‚ 10. Replicate Video Status â†’ GET https://api.replicate.com/.../abc123          â”‚
â”‚    â†“ (VidÃ©o gÃ©nÃ©rÃ©e)                                                           â”‚
â”‚ 11. Replicate retourne: {status: "succeeded", output: "https://replicate..."}  â”‚
â”‚    â†“                                                                            â”‚
â”‚ 12. Format Video Response                                                      â”‚
â”‚    Output: {success: true, type: "video", content: {url: "...", ...}}          â”‚
â”‚    â†“                                                                            â”‚
â”‚ 13. Format Response â†’ Send Response                                            â”‚
â”‚    Retour: [{success: true, type: "video", content: {url: "..."}}]             â”‚
â”‚    â†“                                                                            â”‚
â”‚ 14. App.jsx â†’ setResponse({type: "video", content: {url: "..."}})              â”‚
â”‚    â†“                                                                            â”‚
â”‚ 15. MultimodalDisplay.jsx dÃ©tecte type === "video"                             â”‚
â”‚    Affiche: <video controls><source src={content.url} /></video>               â”‚
â”‚    â†“                                                                            â”‚
â”‚ 16. supabase.js â†’ saveConversation() avec responseType="video"                 â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            FORMATS DE DONNÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PAYLOAD ENVOYÃ‰ AU WEBHOOK N8N                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                                               â”‚
â”‚   "message": "/image un chat dans l'espace",                                   â”‚
â”‚   "timestamp": "2025-12-22T22:30:00.000Z"                                       â”‚
â”‚ }                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RÃ‰PONSE N8N (ARRAY)                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [                                                                               â”‚
â”‚   {                                                                             â”‚
â”‚     "success": true,                                                            â”‚
â”‚     "type": "image",                     â† Type de contenu                      â”‚
â”‚     "content": {                                                                â”‚
â”‚       "url": "https://oaidalleapi...",   â† URL de l'image                      â”‚
â”‚       "description": "A cute cat...",    â† Description gÃ©nÃ©rÃ©e                  â”‚
â”‚       "originalPrompt": "un chat..."     â† Prompt original                      â”‚
â”‚     },                                                                          â”‚
â”‚     "metadata": {                                                               â”‚
â”‚       "inputType": "image-generation",                                          â”‚
â”‚       "command": "image",                                                       â”‚
â”‚       "originalMessage": "/image un chat...",                                   â”‚
â”‚       "model": "dall-e-3"                                                       â”‚
â”‚     },                                                                          â”‚
â”‚     "timestamp": "2025-12-22T22:30:15.000Z"                                     â”‚
â”‚   }                                                                             â”‚
â”‚ ]                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OBJET APRÃˆS EXTRACTION (result[0])                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                                               â”‚
â”‚   "success": true,                                                              â”‚
â”‚   "type": "image",                                                              â”‚
â”‚   "content": {                                                                  â”‚
â”‚     "url": "https://oaidalleapi...",                                            â”‚
â”‚     "description": "A cute cat in space with stars"                             â”‚
â”‚   },                                                                            â”‚
â”‚   "metadata": {...}                                                             â”‚
â”‚ }                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                          COMMANDES DISPONIBLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMMANDE         â”‚ EXEMPLE                   â”‚ RÃ‰SULTAT                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Texte normal     â”‚ "Bonjour comment vas-tu?" â”‚ RÃ©ponse texte de Claude         â”‚
â”‚ /image [desc]    â”‚ "/image un dragon bleu"   â”‚ Image DALL-E affichÃ©e           â”‚
â”‚ /video [desc]    â”‚ "/video un chat qui court"â”‚ VidÃ©o Replicate affichÃ©e        â”‚
â”‚ Microphone ğŸ¤    â”‚ (parler)                  â”‚ Transcription â†’ Traitement      â”‚
â”‚ Upload fichier   â”‚ (glisser image)           â”‚ Placeholder (Ã  configurer)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            TECHNOLOGIES STACK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend:     React 18 + Vite + Tailwind CSS + Web Speech API
Backend:      N8N (Self-hosted) + Supabase PostgreSQL
IA Services:  Anthropic Claude 4.5 + OpenAI DALL-E 3 + Replicate Video
Hosting:      Localhost:3003 (dev) + n8n.srv766650.hstgr.cloud (N8N)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
